<link rel="import" href="../components/polymer/polymer.html">
<link rel="import" href="content-data.html">
<link rel="import" href="../components/core-menu/core-menu.html">
<link rel="import" href="../components/paper-item/paper-item.html">


<polymer-element name="item-nav"> <!-- on-click="{{tapped}}"-->
  <template>
    <style>
      /*core-menu{
        margin:0;
        margin-left:30px;
      }*/
      a.core-selected {
        color: #000;
      }
      polyfill-next-selector { content: '.core-selected > paper-item'; }
      ::content > paper-item {
        border-left: 3px solid rgb(243,99,104);
        opacity: 0.7;
        color: #000;
      }
      .core-selected > paper-item {
        border-left: 3px solid rgb(243,99,104);
        opacity: 0.7;
        color: #000;
      }
      paper-item{
        color: #666666;
        font-size: 12px;
        opacity: 0.7;
        font-weight: 500;
        letter-spacing: 1px;
        text-transform: uppercase;
      }
      paper-item.core-selected{
        /*background-color: #f36368;*/
      }

      .button-content{
        font-size: 12px;
      }

    </style>
    <content-data id="contents" posts="{{posts}}"></content-data>

      <core-menu selected="0">
        <template repeat="{{post in posts}}">
        <a href="#article{{post.uid}}">
        <paper-item on-click={{tapped}}>
          {{post.title}}
          <script>
            var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
            if({{post.selected}}){
              if (isChrome){
                  var b = document.querySelector('mobile-profile::shadow #back');
              }else{
                  var b = document.getElementById('back');
              }
              b.style.background = '{{post.colorcode}}';
              var i = document.querySelector('img#thumbnail');
              i.src = '{{post.thumbnail}}';
              var t = document.querySelector('.menu-label');
              t.innerHTML = '{{post.title}}';
            }
          </script>
        </paper-item>
        </a>
      </template>
      </core-menu>
  </template>
  <script>

  Polymer({
    tapped: function(event, detail, sender){
      var isChrome = /Chrome/.test(navigator.userAgent) && /Google Inc/.test(navigator.vendor);
      if (isChrome){
          var tabcontents = document.querySelector('paper-tabs::shadow #tabsContent');
          var b = document.querySelector('mobile-profile::shadow #back');
          var bar = document.querySelector('paper-tabs::shadow #selectionBar');
          var route = 'article-box::shadow #post'+sender.templateInstance.model.post.uid;
          var currentarticle = document.querySelector('article-box::shadow .show');
          var newarticle = document.querySelector(route);
          currentarticle.className = "hide";
          newarticle.className = "show";
          newarticle.querySelector("#intro").scrollIntoView();
          // console.log(newarticle.querySelector("#intro"));
      }else{
          var b = document.getElementById('back');
          var bar = document.getElementById('selectionBar');
          var tabcontents = document.getElementById('tabsContent');
          var route = 'post'+sender.templateInstance.model.post.uid;
          // console.log(route);

          for(var i = 1; i <10; i++){
            document.getElementById('post'+i).className = "hide";
          }
          var newarticle = document.getElementById(route);
          newarticle.className = "show";
          newarticle.getElementsByTagName("div")[0].scrollIntoView();

      }

      // console.log(tabcontents);
      b.style.background = sender.templateInstance.model.post.colorcode;
      var i = document.querySelector('img#thumbnail');
      i.src = sender.templateInstance.model.post.thumbnail;
      var t = document.querySelector('.menu-label');
      t.innerHTML = sender.templateInstance.model.post.title;




      // var tabs = document.querySelectorAll('paper-tab');

      // console.log(tabs);
      // for(var i = 0; i < tabs.length; i++){
      //   tabs[i].className = "";
      //   tabs[i].removeAttribute("active");
      //   // console.log(tabs[i]);
      // }
      // var parent = document.getElementById("div1");
      // var child = document.getElementById("p1");
      // tabcontents.removeChild(bar);
    }
  });
  // var s = document.querySelector('core-menu');

  </script>
</polymer-element>
